<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=1240px" />
    <title>영근 이야기 -영근이야기로 세상을 바꾸다-</title>

    <link rel="stylesheet" href="../css/index.css" />
    <link rel="stylesheet" href="../css/yg_story.css" />
    <link
      id="favicon"
      rel="icon"
      href="/favicon/favicon-16x16.png?v=87"
      sizes="16x16"
    />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="/favicon/apple-icon-57x57.png?v=87"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="/favicon/apple-icon-60x60.png?v=87"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="/favicon/apple-icon-72x72.png?v=87"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="/favicon/apple-icon-76x76.png?v=87"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="/favicon/apple-icon-114x114.png?v=87"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="/favicon/apple-icon-120x120.png?v=87"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="/favicon/apple-icon-144x144.png?v=87"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/favicon/apple-icon-152x152.png?v=87"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/favicon/apple-icon-180x180.png?v=87"
    />
    <link rel="manifest" href="/favicon/manifest.json?v=87" />
    <meta name="msapplication-TileColor" content="#140b01" />
    <meta
      name="msapplication-TileImage"
      content="/favicon/ms-icon-144x144.png?v=87"
    />
    <meta name="theme-color" content="#140b01" />

    <meta property="og:site_name" content="영근 이야기에 오신걸 환영합니다." />

    <script>
      dataLayer = [
        {
          userId: "",
          network: "",
          refcode: "fap_w11832p119_demo_game_cash",
        },
      ];
    </script>
  </head>

  <body
    class="body-ru"
    data-channels="Elslots_elslots_prod_prod_users_all"
    data-is-prod="true"
  >
    <div id="link-to-mobile-container">
      <a class="btn btn-red email-confirmation-link" href="//m.elslots.com"
        >Мобильная версия</a
      >
    </div>

    <div
      class="page-wrapper page-wrapper-for-mobile"
      data-spy="affix"
      data-offset-top="51"
    >
      <div class="container">
        <!-- HEADER -->
        <header class="page-header">
          <nav class="header-navbar">
            <ul class="header-top-nav">
              <li>
                <a
                  class="header-navbar-link"
                  href="catch_yh.html"
                  class="button"
                  >영근이형을 잡아라!</a
                >
              </li>
              <li>
                <a class="header-navbar-link" href="make_yh.html" class="button"
                  >영근이형 생성기</a
                >
              </li>
              <li>
                <a
                  class="header-navbar-link"
                  href="#"
                  class="button"
                  onclick="startGame('holjjack.html', '홀짝')"
                  >홀짝</a
                >
              </li>
              <li>
                <a
                  class="header-navbar-link"
                  href="suika_game.html"
                  class="button"
                  >수박게임</a
                >
              </li>
              <li>
                <a
                  class="header-navbar-link"
                  href="bubble_shooter.html"
                  class="button"
                  ><span class="icon icon-promo"></span>버블슈터</a
                >
              </li>
              <li>
                <a
                  class="header-navbar-link"
                  href="blackjack.html"
                  class="button"
                  rel="nofollow"
                  ><span class="icon icon-prizes"></span>블랙잭</a
                >
              </li>
            </ul>
          </nav>

          <div class="site-logo">
            <span
              style="
                padding: 0;
                line-height: 51px;
                font-size: 20px;
                color: gold;
              "
              >역시 영근이 형이야!</span
            >
          </div>

          <div class="header-info">
            <div class="header-jackpot">
              <a
                href="slot_machine.html"
                class="header-jackpot-title"
                style="width: 200px"
              >
                <span style="margin-left: 80px">슬롯머신</span>
                <span class="hover-second">도전해보세요!</span>
              </a>
              <a
                href="../html/slot_machine2.html"
                class="base-block odometer-box"
              >
                <i class="base-block curr-uah gradient"></i>
                <h3
                  class="base-block header-jackpot-counter odometer gradient jackpot-total-sum"
                ></h3>
              </a>
            </div>
            <div class="header-entry">
              <div class="header-entry-btn">
                <div class="register-btn" id="username-box"></div>
                <div id="totalCredit">보유 크레딧</div>
              </div>
              <div
                id="uLoginAuth"
                class="uLogin"
                data-ulogin="display=buttons; optional=first_name,last_name,email,nickname,bdate,sex,phone,city,country;redirect_uri=https%3A%2F%2Felslots.com%2Fulogin_check"
              >
                <!-- uLogin custom icons -->
                <a class="uLogin-custom-icon vk" data-uloginbutton="vkontakte"
                  ><span>Y</span></a
                >
                <a class="uLogin-custom-icon ml" data-uloginbutton="mailru"
                  ><span>O</span></a
                >
                <a class="uLogin-custom-icon ya" data-uloginbutton="yandex"
                  ><span>U</span></a
                >
                <a
                  class="uLogin-custom-icon ok"
                  data-uloginbutton="odnoklassniki"
                  ><span>N</span></a
                >
                <a class="uLogin-custom-icon ggl" data-uloginbutton="google"
                  ><span>G</span></a
                >
                <a class="uLogin-custom-icon fb" data-uloginbutton="facebook"
                  ><span>G</span></a
                >
                <a class="uLogin-custom-icon fb" data-uloginbutton="facebook"
                  ><span>E</span></a
                >
                <a class="uLogin-custom-icon fb" data-uloginbutton="facebook"
                  ><span>U</span></a
                >
                <a class="uLogin-custom-icon fb" data-uloginbutton="facebook"
                  ><span>N</span></a
                >
                <a class="uLogin-custom-icon fb" data-uloginbutton="facebook"
                  ><span></span
                ></a>
                <a class="uLogin-custom-icon fb" data-uloginbutton="facebook"
                  ><span>S</span></a
                >
                <a class="uLogin-custom-icon fb" data-uloginbutton="facebook"
                  ><span>T</span></a
                >
                <a class="uLogin-custom-icon fb" data-uloginbutton="facebook"
                  ><span>O</span></a
                >
                <a class="uLogin-custom-icon fb" data-uloginbutton="facebook"
                  ><span>R</span></a
                >
                <a class="uLogin-custom-icon fb" data-uloginbutton="facebook"
                  ><span>Y</span></a
                >
              </div>
            </div>
           </div>
        </header>
        <!-- MAIN CONTENT -->
        <main class="page-content">
            
                <div class="carousel-inner" role="listbox">
            
                <div class="item item-fade active">
                        <img src="../static/images/banner.png" alt="Eldorado" style="width: 100%; height: auto;" >
                </div>
                </div>

          <aside class="site-sidebar sidebar-left">
            <div class="sidebar-block highlight-block">
              <div class="winners-widget">
                <div class="winners-header">
                  <a href="/hall-of-fame">
                    <span class="header-title" style="margin: 0 30px"
                      >신규 (25/07/06)</span
                    >
                  </a>
                </div>
                <div class="winners-body">
                  <div
                    class="carousel winners-carousel slide"
                    data-ride="carousel"
                  >
                    <div class="carousel-inner" role="listbox">
                      <div class="item item-slide-up active">
                        <div class="winner-box">
                          <div class="winner-pic">
                            <span style="font-size: 12px; margin-right: 10px"
                              >NEW!</span
                            >
                          </div>
                          <div class="winner-data">
                            <span class="text__yellow winner-nick">이성하</span>
                            <span class="winner-sum"
                              ><span class="curr-uah"></span>10,000</span
                            >
                          </div>
                        </div>
                        <div class="winner-box">
                          <div class="winner-pic">
                            <span style="font-size: 12px; margin-right: 10px"
                              >NEW!</span
                            >
                          </div>
                          <div class="winner-data">
                            <span class="text__yellow winner-nick">이웬히</span>
                            <span class="winner-sum"
                              ><span class="curr-uah"></span>6,800</span
                            >
                          </div>
                        </div>
                        <div class="winner-box">
                          <div class="winner-pic">
                            <span style="font-size: 12px; margin-right: 10px"
                              >NEW!</span
                            >
                          </div>
                          <div class="winner-data">
                            <span class="text__yellow winner-nick">심남희</span>
                            <span class="winner-sum"
                              ><span class="curr-uah"></span>4,360</span
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
                        
                <div class="item item-fade active" data-ttl="7">
                    <img alt="댄스영근" src="../static/images/sidebanner.gif" style="width: 168px; height: 300px;" /></a>
                
                    <div class="dev-list-box">

                    <span>▼&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;필터지만 사실 링크임 <i class="toggler"></i></span>
                        <ul class="dev-list">
                            <li><a href="catch_yh.html" class="dev-filter-btn">영근이형을 잡아라!</a></li>
                            <li><a href="catch_yh.html" class="dev-filter-btn">영근이형 생성기</a></li>
                            <li><a href="holjjack.html" class="dev-filter-btn">홀짝</a></li>
                            <li><a href="suika_game.html" class="dev-filter-btn">수박게임</a></li>
                            <li><a href="bubble_shooter.html" class="dev-filter-btn">버블슈터</a></li>
                            <li><a href="slot_machine.html" class="dev-filter-btn">슬롯머신</a></li>
                            <li><a href="blackjack.html" class="dev-filter-btn">블랙잭</a></li>
                            <li><a href="shell_game.html" class="dev-filter-btn">야바위</a></li>
                            <li><a href="different_card.html" class="dev-filter-btn">틀린영근찾기</a></li>
                            <li><a href="tower_blocks.html" class="dev-filter-btn">타워블록</a></li>
                            <li><a href="../spider/index.html" class="dev-filter-btn">스파이더카드</a></li>
                            <li><a href="https://killedbyapixel.github.io/Drive13K/"  class="dev-filter-btn">레이싱게임</a></li>
                            <li><a href="https://leokuo0724.github.io/Templar-s-Final-Stand/"  class="dev-filter-btn">카드나이츠</a></li>
                            <li><a href="https://play2048.co/"  class="dev-filter-btn">2048</a></li>
                            <li><a href="https://mimstris.onrender.com/"  class="dev-filter-btn">테트리스</a></li>
                            <li><a href="https://mk.mgechev.com/"  class="dev-filter-btn">철권 비스무리한거</a></li>
                            <li><a href="https://weslley.co/board"  class="dev-filter-btn">기억력게임</a></li>
                            <li><a href="https://openhtml5games.github.io/games-mirror/dist/mariohtml5/main.html"  class="dev-filter-btn">짭 마리오</a></li>
                            <li><a href="https://blog.yjyoon.dev/games/snake.html"  class="dev-filter-btn">스네이크 게임</a></li>
                        </ul>
                    </div>
                    
                <button class="button">
                    <span class="actual-text">&nbsp;&nbsp;영근이야기&nbsp;</span>
                    <span aria-hidden="true" class="hover-text">&nbsp;&nbsp;영근이야기&nbsp;</span>
                </button>
        </div>

           </aside>
          <!-- CONTENT -->
          <section class="content-section">
            <div class="game-room-content">
              <div class="games-container on-main">
                <h2 class="games-title">게임 리스트</h2>
                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                      href="#"
                      class="play-btn real no-demo"
                      onclick="startGame('catch_yh.html', '영근이형을 잡아라!')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_catchyg.png"
                      alt="영근이형을 잡아라"
                    />
                    <span>영근이형을 잡아라!</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                     href="#"
                     class="play-btn real no-demo"
                     onclick="startGame('make_yh.html', '영근이형 생성기')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_createyg.png"
                      alt="영근이형 생성기"
                    />
                    <span>영근이형 생성기</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                      href="#"
                      class="play-btn real no-demo"
                      onclick="startGame('holjjack.html', '홀·짝 게임')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_holjjack.png"
                      alt="홀짝"
                    />
                    <span>홀짝</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                      href="#"
                      class="play-btn real no-demo"
                      onclick="startGame('suika_game.html', '수박게임')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_suika.png"
                      alt="수박게임"
                    />
                    <span>수박게임</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                      href="#"
                      class="play-btn real no-demo"
                      onclick="startGame('bubble_shooter.html', '버블슈터')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_bubbleshooter.png"
                      alt="버블슈터"
                    />
                    <span>버블슈터</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                      href="#"
                      class="play-btn real no-demo"
                      onclick="startGame('slot_machine.html', '슬롯머신')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_slotmachine.png"
                      alt="슬롯머신"
                    />
                    <span>슬롯머신</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                      href="#"
                      class="play-btn real no-demo"
                      onclick="startGame('blackjack.html', '블랙잭')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_blackjack.png"
                      alt="블랙잭"
                    />
                    <span>블랙잭</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                      href="#"
                      class="play-btn real no-demo"
                      onclick="startGame('shell_game.html', '야바위')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_shell.png"
                      alt="야바위"
                    />
                    <span>야바위</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                      href="#"
                      class="play-btn real no-demo"
                      onclick="startGame('different_card.html', '틀린그림 찾기')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_different.png"
                      alt="틀린영근찾기"
                    />
                    <span>틀린영근찾기</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                      href="#"
                      class="play-btn real no-demo"
                      onclick="startGame('tower_blocks.html', '타워블록')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_tower.png"
                      alt="타워블록"
                    />
                    <span>타워블록</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a href="#"
                       class="play-btn real no-demo"
                       onclick="startGame('', '타워블록')"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_spider.png"
                      alt="스파이더 카드게임"
                    />
                    <span>스파이더 카드게임</span>
                  </div>
                </div>

                <div class="game" data-gameid="105">
                  <a class="fave-star" title="" href="#"></a>
                  <div class="game-link">
                    <div class="game-shadow"></div>
                    <a
                      href="https://killedbyapixel.github.io/Drive13K/"
                      class="play-btn real no-demo"
                      >바로가기</a
                    >
                    <img
                      src="../static/images/thumnail/thumb_raicing.png"
                      alt="레이싱게임"
                    />
                    <span>레이싱게임</span>
                  </div>
                </div>

                <!-- Other games list follows similar structure -->
              </div>
            </div>
          </section>
        </main>
    </div>
    </div>

    <script>
      // 1. 쿼리스트링 → localStorage 저장
      const params = new URLSearchParams(window.location.search);
      const keys = ['memberId', 'memberName', 'memberCredit', 'memberRole'];

      for (const key of keys) {
        const val = params.get(key);
        if (val && val !== "undefined" && val !== "null") {
          localStorage.setItem(key, val);
        }
      }

      // 2. localStorage에서 정보 불러와서 표시
      const memberName = localStorage.getItem("memberName");
      const memberCredit = localStorage.getItem("memberCredit");

      document.getElementById("username-box").innerText =
              memberName ?? "게스트";

      document.getElementById("totalCredit").innerText =
              memberCredit ?? "보유 크레딧이 없습니다. 충전해 주세요.";

      function updateCredits() {
        // 항상 최신 localStorage 값을 기준으로!
        const currentCredits = Number(localStorage.getItem("memberCredit")) || 0;

        // DOM 업데이트
        document.getElementById("totalCredit").innerText = `${currentCredits} 크레딧`;
      }

      // 3. 게임 시작 함수
      function startGame(gameFileName, gameName) {
        const memberId = localStorage.getItem("memberId");
        console.log("확인용 memberId:", memberId);

        if (!memberId || memberId === "null" || memberId === "undefined") {
          alert("로그인 후 이용해주세요.");
          return;
        }

        fetch("/api/game/start", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ memberId, gameName })
        })
                .then(res => {
                  if (!res.ok) throw new Error("크레딧이 부족합니다.");
                  return res.json();
                })
                .then((data) => {

                  localStorage.setItem("memberCredit", data.updatedCredit);
                  credits = data.updatedCredit;
                  updateCredits();
                  window.location.href = gameFileName;
                })
                .catch(err => alert(err.message));
      }

      window.addEventListener("storage", (e) => {
        if (e.key === "memberCredit") {
          document.getElementById("totalCredit").innerText = `${e.newValue} 크레딧`;
        }
      });

    </script>
  </body>
</html>
